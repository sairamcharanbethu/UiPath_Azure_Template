# uipath-template.yml
parameters:
  workingDir: ''

steps:
- checkout: self

- powershell: |
    New-Item -Path "${{ parameters.workingDir }}" -ItemType "directory" -Name "scripts";
    Invoke-WebRequest "https://github.com/UiPath-Services/UiPath-DevOps-Scripts/raw/main/scripts/UiPathPack.ps1" -OutFile "${{ parameters.workingDir }}scripts\UiPathPack.ps1";
  displayName: 'Download PS Scripts'

- powershell: |
    New-Item -Path "${{ parameters.workingDir }}" -ItemType "directory" -Name "output";
    . "${{ parameters.workingDir }}scripts\UiPathPack.ps1" "${{ parameters.workingDir }}project.json" "${{ parameters.workingDir }}output\\" -autoVersion
  displayName: 'UiPath Pack'
