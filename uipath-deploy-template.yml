# uipath-template.yml
parameters:
  workingDir: ''

steps:
- checkout: self

- powershell: |
    New-Item -Path "${{ parameters.workingDir }}" -ItemType "directory" -Name "scripts";
    Invoke-WebRequest "https://raw.githubusercontent.com/sairamcharanbethu/UiPath_Azure_Template/main/UiPathPack.ps1?token=GHSAT0AAAAAACGQ2E2WVL7X7MTHAQAVOZ3GZHCLYMA" -OutFile "${{ parameters.workingDir }}scripts\UiPathPack.ps1";
  displayName: 'Download PS Scripts'

- powershell: |
    New-Item -Path "${{ parameters.workingDir }}" -ItemType "directory" -Name "output";
    . "${{ parameters.workingDir }}scripts\UiPathPack.ps1" "${{ parameters.workingDir }}project.json" "${{ parameters.workingDir }}output\\" -autoVersion
  displayName: 'UiPath Pack'
